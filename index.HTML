<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</title>

<style>
*{box-sizing:border-box;font-family:"Segoe UI",Arial,sans-serif}

body{
  margin:0;
  min-height:100vh;
  background:#f3f4f6;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding-top:40px;
}

.container{
  width:420px;
  background:#fff;
  padding:28px;
  border-radius:22px;
  box-shadow:0 12px 30px rgba(0,0,0,.12);
}

.header{text-align:center;margin-bottom:22px}
.header h2{margin:0}
.header p{margin-top:6px;font-size:13px;color:#6b7280}

input,button{
  width:100%;
  padding:14px;
  margin-bottom:14px;
  border-radius:14px;
  border:1px solid #d1d5db;
  font-size:15px;
}

input:focus{
  outline:none;
  border-color:#6366f1;
  box-shadow:0 0 0 3px rgba(99,102,241,.15);
}

.add-btn{
  background:#6366f1;
  color:#fff;
  border:none;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
}

.task-list{margin-top:24px}
.task-list h3{font-size:15px;margin-bottom:10px}

.task{
  background:#f9fafb;
  border-radius:18px;
  padding:16px;
  margin-bottom:16px;
  animation:fade .3s;
}
@keyframes fade{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:none}
}

.task.red{border-left:6px solid #ef4444}

.task-title{font-weight:600;font-size:16px}
.task-date{font-size:13px;color:#6b7280;margin-top:4px}

.task-actions{
  display:flex;
  align-items:center;
  margin-top:14px;
}

.send-btn{
  flex:1;
  border:none;
  background:#e0e7ff;
  border-radius:999px;
  cursor:pointer;
}

.send-btn.done{
  background:#22c55e;
  color:#fff;
  animation:pop .4s;
}

@keyframes pop{
  0%{transform:scale(1)}
  50%{transform:scale(1.15)}
  100%{transform:scale(1)}
}

.delete-btn{
  width:44px;
  height:44px;
  margin-left:10px;
  border-radius:50%;
  border:none;
  background:#ef4444;
  color:#fff;
  font-size:18px;
  cursor:pointer;
}

.submit-menu{
  display:none;
  margin-top:12px;
  background:#eef2ff;
  padding:12px;
  border-radius:14px;
}

.submit-menu label{
  display:block;
  font-size:14px;
  margin-bottom:8px;
}

.error{
  color:#ef4444;
  font-size:13px;
  margin-top:4px;
}

.success{
  color:#16a34a;
  font-size:14px;
  margin-top:8px;
}

.confetti{
  position:fixed;
  width:8px;
  height:8px;
  animation:fall 1.5s linear forwards;
}

@keyframes fall{
  to{transform:translateY(100vh) rotate(360deg);opacity:0}
}
</style>
</head>

<body>

<div class="container">

  <div class="header">
    <h2>üìÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</h2>
    <p>‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏á‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô</p>
  </div>

  <input id="titleInput" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô">
  <input id="dateInput" type="date">
  <button class="add-btn" onclick="addTask()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô</button>

  <div class="task-list">
    <h3>üìå ‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h3>
    <div id="list"></div>
  </div>

</div>

<script>
let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

function addTask(){
  const title=document.getElementById("titleInput").value.trim();
  const date=document.getElementById("dateInput").value;

  if(!title || !date){
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
    return;
  }

  tasks.push({title,date,done:false,open:false,unlock:false});
  localStorage.setItem("tasks",JSON.stringify(tasks));
  render();

  titleInput.value="";
  dateInput.value="";
}

function render(){
  const list=document.getElementById("list");
  list.innerHTML="";

  tasks.forEach((t,i)=>{
    const diff=(new Date(t.date)-new Date())/(1000*60*60*24);

    const div=document.createElement("div");
    div.className="task"+(diff<=2?" red":"");

    div.innerHTML=`
      <div class="task-title">${t.title}</div>
      <div class="task-date">üìÖ ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡πà‡∏á: ${t.date}</div>

      <div class="task-actions">
        <button class="send-btn ${t.done?"done":""}"
          onclick="sendClick(${i},this)" ${t.done?"disabled":""}>
          ${t.done?"‚úî ‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß":"üì§ ‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô"}
        </button>
        <button class="delete-btn" onclick="deleteTask(${i})">üóë</button>
      </div>

      <div class="submit-menu" style="display:${t.open?"block":"none"}">
        <label>üìé ‡πÅ‡∏ô‡∏ö‡πÑ‡∏ü‡∏•‡πå <input type="file"></label>
        <label>üîó ‡∏•‡∏¥‡∏á‡∏Å‡πå <input type="url" placeholder="https://"></label>
        <div class="error"></div>
      </div>

      ${t.done?'<div class="success">üéâ ‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß</div>':""}
      ${t.unlock?'<div class="success">üîì ‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß</div>':""}
    `;

    list.appendChild(div);
  });
}

function sendClick(i,btn){
  if(tasks[i].done) return;

  const taskDiv=btn.closest(".task");
  const menu=taskDiv.querySelector(".submit-menu");
  const error=menu.querySelector(".error");
  const linkInput=menu.querySelector("input[type=url]");
  const fileInput=menu.querySelector("input[type=file]");

  if(!tasks[i].open){
    tasks[i].open=true;
    localStorage.setItem("tasks",JSON.stringify(tasks));
    render();
    return;
  }

  const link=linkInput.value.trim();
  const file=fileInput.files.length;
  error.innerText="";

  // üîê ‡∏Ñ‡∏µ‡∏¢‡πå‡∏•‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏î‡∏™‡∏≠‡∏ö
  if(link==="AKPSS"){
    tasks[i].unlock=true;
    tasks[i].open=false;
    localStorage.setItem("tasks",JSON.stringify(tasks));
    alert("üîì ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ");
    render();
    return;
  }

  if(file===0 && link===""){
    error.innerText="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏ô‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏™‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå";
    return;
  }

  if(file===0 && !link.startsWith("http://") && !link.startsWith("https://")){
    error.innerText="‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ http:// ‡∏´‡∏£‡∏∑‡∏≠ https://";
    return;
  }

  tasks[i].done=true;
  tasks[i].open=false;
  localStorage.setItem("tasks",JSON.stringify(tasks));
  confetti();
  render();
}

function deleteTask(i){
  if(!tasks[i].done && !tasks[i].unlock){
    alert("‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö");
    return;
  }

  if(confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")){
    tasks.splice(i,1);
    localStorage.setItem("tasks",JSON.stringify(tasks));
    render();
  }
}

function confetti(){
  for(let i=0;i<30;i++){
    const c=document.createElement("div");
    c.className="confetti";
    c.style.left=Math.random()*100+"vw";
    c.style.background=`hsl(${Math.random()*360},100%,50%)`;
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),1500);
  }
}

render();
</script>

</body>
</html>
